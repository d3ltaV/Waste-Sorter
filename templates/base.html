<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- IE meta harmless; you can remove if you want -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Team's base styles first (Montserrat + resets) -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
  <!-- Your enhancements after (override safely) -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

  {% block head %}{% endblock head %}
</head>
<body class="page">
  <header class="site-header">
    <a class="brand" href="/">
      <img src="{{ url_for('static', filename='img/logo.svg') }}"
           alt="Waste-Sorter logo"
           onerror="this.style.display='none'">
      <span>Waste-Sorter</span>
    </a>
    <nav class="nav">
      <a href="/">Home</a>
      <a href="/about">About</a>
      <a href="/docs">Docs</a>
    </nav>
  </header>

  <!-- IMPORTANT: keep block name 'body' (team built against this) -->
  {% block body %}{% endblock body %}

  <footer class="site-footer">
    <p>Model: YOLOv8s on TACO → Recycling · Trash · Compost.</p>
    <!-- If a page includes #detected, the script below will auto-update text -->
    <span id="detected" class="detected-text"></span>
  </footer>

  {% block scripts %}
  <!-- Poll /detection and update #detected if present -->
  <script>
    (function () {
      const el = document.getElementById("detected");
      if (!el) return;
      async function tick() {
        try {
          const res = await fetch("/detection");
          if (!res.ok) return;
          const data = await res.json();
          if (!data) return;
          const pct = Math.round((data.confidence || 0) * 100);
          el.textContent = `Detected: ${data.label} (${data.category}) · Confidence: ${pct}%`;
        } catch (_) {}
      }
      tick();
      setInterval(tick, 500);
    })();
  </script>
  {% endblock %}
</body>
</html>

